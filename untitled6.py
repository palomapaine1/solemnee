# -*- coding: utf-8 -*-
"""Untitled6.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1G9yh4wlXEdDho0ojgLcZPqKlxiAGq9du
"""


import streamlit as st
import pandas as pd
import requests
# Título de la aplicación
st.title('Aplicación Web: Datos desde una API REST')
# URL de la API REST (puedes cambiarla por cualquier API pública que devuelva JSON)
api_url = 'https://jsonplaceholder.typicode.com/posts'
# Realizar la petición a la API
response = requests.get(api_url)
# Verificar que la respuesta sea exitosa (código 200)
if response.status_code == 200:
# Convertir los datos JSON en un DataFrame de Pandas
    data = response.json()
    df = pd.DataFrame(data)
# Mostrar los primeros registros
    st.write('Datos obtenidos de la API:')
    st.write(df.head())
else:  # Corrected indentation here
    st.error('Error al obtener los datos de la API')
api_url_countries = "https://restcountries.com/v3.1/all"
df_countries = obtener_datos_api(api_url_countries)

if df_countries is not None:
    # Selección de columnas específicas
    df_countries['Nombre'] = df_countries['name'].apply(lambda x: x.get('common') if isinstance(x, dict) else None)
    df_countries['Región'] = df_countries.get('region', 'Desconocido')
    df_countries['Población'] = df_countries.get('population', 0)
    df_countries['Área (km²)'] = df_countries.get('area', 0)

    st.write('Datos obtenidos de REST Countries:')
    st.write(df_countries[['Nombre', 'Región', 'Población', 'Área (km²)']].head())
else:
    st.error('Error al procesar los datos de REST Countries')
